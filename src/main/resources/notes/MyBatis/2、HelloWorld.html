<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="3397"/>
<h1>2、HelloWorld</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2017/6/26 10:09</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2017/6/26 14:12</i></td></tr>
<tr><td><b>作者：</b></td><td><i>雷丰阳</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div>MyBatis是持久化层框架（SQL映射框架）-操作数据库</div><div><br/></div><div>1）、环境搭建</div><div>     1）、创建一个java工程；</div><div>     2）、创建测试库，测试表，以及封装数据的javaBean，和操作数据库的dao接口</div><div>               创建表：自己用工具创建</div><div>               创建javaBean：Employee（封装表的数据）</div><div>               创建一个Dao接口，用来操作数据库；</div><div><br/></div><hr/><div>     3）、用MyBatis操作数据库？</div><div>               1）、导包</div><div>             
<div align="left" style="min-height: 18pt;"><font face="Consolas" size="4"><span style="font-size:16pt">    </span></font><font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:16pt">//</span><span style="font-size:16pt"><u>mysql</u></span><span style="font-size:16pt">-connector-java-5.1.37-bin.jar</span></font></div><div align="left" style="min-height: 18pt;"><div><font face="Consolas" size="4"><span style="font-size:16pt">    </span></font><font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:16pt">//</span><span style="font-size:16pt"><u>mybatis</u></span><span style="font-size:16pt">-3.4.1.jar</span></font></div><div align="left" style="min-height: 18pt;"><div><font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:16pt; background:#e8f2fe">   //log4j-1.2.17.jar</span></font></div></div><div><span style="font-family: Consolas;"><span style="color: rgb(63, 127, 95);">       //建议导入日志包；这样的化在mybatis关键的环节就会有日志打印；</span></span></div><div><span style="font-family: Consolas;"><span style="color: rgb(63, 127, 95);">       //log4j（日志框架）;依赖类路径下一个log4j.xml配置文件；<br/></span></span></div></div></div><div>               2）、写配置（两个，全局配置文件（指导mybatis运行的），dao接口的实现文件（描述dao中每个方法怎么工作））</div><div>                         1）、第一个配置文件；（称为mybatis的全局配置文件，指导mybatis如何正确运行，比如连接向哪个数据库）</div><div>                         2）、第二个配置文件：（编写每一个方法都如何向数据库发送sql语句，如何执行。。。。相当于接口的实现类）</div><div>                                   1)、将mapper的namespace属性改为接口的全类名</div><div>                                   2)、配置细节</div><div align="left" style="min-height: 18pt;"><div style="margin-left:120px;"><br/></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">&lt;!--<span style="color: rgb(227, 0, 0);"><b>namespace：名称空间；写接口的全类名，相当于告诉MyBatis这个配置文件是实现哪个接口的；</b></span>  --&gt;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">&lt;mapper</span> <span style="color: rgb(227, 0, 0);">namespace=&quot;com.atguigu.dao.EmployeeDao&quot;</span><span style="color: rgb(51, 51, 51);">&gt;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">&lt;!-- public Employee getEmpById(Integer id); --&gt;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);"> &lt;!--</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);"> select：用来定义一个查询操作</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);"> id:方法名，相当于这个配置是对于某个方法的实现</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);"> resultType:指定方法运行后的返回值类型；（查询操作必须指定的）</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);"> #{属性名}：代表取出传递过来的某个参数的值</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);"> --&gt;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">  &lt;select</span> <span style="color: rgb(227, 0, 0);">id=&quot;getEmpById&quot;</span> <span style="color: rgb(51, 51, 51);">resultType=&quot;com.atguigu.bean.Employee&quot;&gt;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">    select * from t_employee where id=#{id}</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">  &lt;/select&gt;</span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;"><span style="color: rgb(51, 51, 51);">&lt;/mapper&gt;</span></span></span></div></div></div><div>                         3）、我们写的dao接口的实现文件，mybatis默认是不知道的，<span style="color: rgb(227, 0, 0);"><b>需要在全局配置文件中注册；</b></span></div><div>                         </div><div align="left" style="min-height: 18pt;"><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;!-- 引入我们自己编写的每一个接口的实现文件 --&gt;</div><div><span style="color: rgb(255, 0, 0);">  &lt;mappers&gt;</span></div><div><span style="color: rgb(255, 0, 0);">    &lt;!--resource:表示从类路径下找资源  --&gt;</span></div><div><span style="color: rgb(255, 0, 0);">    &lt;mapper resource=&quot;mybatis/EmployeeDao.xml&quot;/&gt;</span></div><div><span style="color: rgb(255, 0, 0);">  &lt;/mappers&gt;</span></div></div><div><br/></div></div><div>    </div><div>          3）、测试</div><div>                    1）、根据全局配置文件先创建一个
<div align="left" style="min-height: 18pt;"><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>        String resource = &quot;mybatis-config.xml&quot;;</div><div>        InputStream inputStream = Resources.getResourceAsStream(resource);</div><div>        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);</div></div><div><br/></div></div></div><div>                   2）、sqlSessionFactory中获取sqlSession对象操作数据库即可</div><div align="left" style="min-height: 18pt;"><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>        //2、获取和数据库的一次会话；getConnection()；</div><div>        SqlSession openSession = sqlSessionFactory.openSession();</div><div>        //3、使用SqlSession操作数据库，获取到dao接口的实现</div><div>        EmployeeDao employeeDao = openSession.getMapper(EmployeeDao.class);</div><div>        //4、调用之前的方法；</div><div>        Employee employee = employeeDao.getEmpById(1);</div><div>        System.out.println(employee);</div></div><div><br/></div><div><hr/></div><div>如何写xml有提示；</div><div>1）、只要eclipse找到了这个文件的dtd约束文件的位置即可</div><div>2）、绑定约束文件的位置</div><div>          1、复制dtd的引用网址：
<div align="left" style="min-height: 18pt;"><div><font color="#3F7F5F" face="Consolas" size="4"><span style="font-size:16pt; background:#e8f2fe">http://mybatis.org/dtd/mybatis-3-config.dtd</span></font></div><div><span style="font-family: Consolas;"><span style="background-color: rgb(232, 242, 254);"><span style="color: rgb(63, 127, 95);">     2、window-perferences</span></span></span></div><div><img src="2、HelloWorld_files/Image.png" type="image/png" style="height: auto;"/></div><div><img src="2、HelloWorld_files/Image [1].png" type="image/png" style="height: auto;"/></div><div><img src="2、HelloWorld_files/Image [2].png" type="image/png" style="height: auto;"/></div><div><img src="2、HelloWorld_files/Image [3].png" type="image/png" style="height: auto;"/></div><div><br/></div><div><hr/></div><div>两个文件：</div><div>     1）、全局配置文件：mybatis-config.xml；指导mybatis正确运行的一些全局设置；</div><div>     2）、SQL映射文件：EmployeeDao.xml；相当于是对Dao接口的一个实现描述</div><div>细节：</div><div>     1）、获取到的是接口的代理对象；mybatis自动创建的；</div><div>     2）、SqlSessionFactory和SqlSession；</div><div>          SqlSessionFactory创建SqlSession对象，Factory只new一次就行</div><div>          SqlSession：相当于connection和数据库进行交互的，和数据库的一次会话，就应该创建一个新的sqlSession；</div><div><br/></div><div><hr/></div><div><br/></div></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div></span>
</div></body></html> 